<%- include ("../includes/navigation.ejs") -%>

    <main>
        <% if(errorMessage) { %>
            <div><h5 id="error-message" class="center-align"><%= errorMessage %></h5></div>
        <% } %>
        
        <form action="/admin/<% if (editing) {%>edit-product<% } else { %>product<% } %>" method="post" enctype="multipart/form-data">
               <div class="input-field col s6">
                <i class="material-icons prefix">title</i>
                <input class="<%= validationErrors.find(e => e.param === 'title')  ? 'invalid' : '' %>" id="title" type="text" name="title" class="validate" value="<% if (editing) { %><%= product.title %> <% } else { %><%= oldInput.title %><% } %>">
                <label for="title">Add Item</label>
               </div>
               <div class="file-field input-field">
                <div class="btn">
                  <span>Image</span>
                  <input id="image" name="image" type="file">
                </div>
                <div class="file-path-wrapper">
                  <input class="file-path validate" type="text">
                </div>
              </div>
               <div class="input-field col s6">
                <i class="material-icons prefix">euro_symbol</i>
                <input class="<%= validationErrors.find(e => e.param === 'price')  ? 'invalid' : '' %>" step="0.01" id="price" type="number" name="price" class="validate" value="<% if (editing) { %><%= product.price %><% } else { %><%= oldInput.price %><% } %>">
                <label for="price">Price</label>
               </div>
               <div class="input-field col s12">
                <i class="material-icons prefix">mode_edit</i>
                <textarea class="<%= validationErrors.find(e => e.param === 'description')  ? 'invalid' : '' %>" rows="5" id="description" name="description" class="materialize-textarea"><% if (editing) { %><%= product.description %><% } else { %><%= oldInput.description %><% } %></textarea>
                <label for="description">Description</label>
               </div>
               <% if (editing) { %>
               <input type="hidden" name="productId" value="<%= product._id %>">
               <% } %>
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <button class="btn waves-effect waves-light" type="submit"><% if (editing) { %> Update Product <% } else { %> Add Item <% } %>
                <i class="material-icons right">add_box</i>
              </button>
        </form>
    </main>
    <div class="test">
        <h1>Y'alright Mate</h1>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <%- include ("../includes/end.ejs") -%>